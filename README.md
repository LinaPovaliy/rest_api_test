# Проект: rest_api_test

## Описание

Этот проект представляет собой REST API для управления пользователями, реализованный 
с использованием фреймворка Symfony. API предоставляет методы для создания, обновления, 
удаления, авторизации и поиска пользователей. Все запросы и ответы формируются в формате 
JSON, что обеспечивает простую интеграцию с клиентскими приложениями.

Каждый метод подробно описан ниже, с примерами использования для Postman.
## Установка
1) Клонируйте репозиторий:
`git clone git@github.com:LinaPovaliy/rest_api_test.git`
2) Перейдите в директорию проекта:
`cd rest_api_test`
3) Установите зависимости:
`composer install`
4) Настройте подключение к базе данных в файле `.env`. В качестве базы 
данных используется SQLite, что упрощает установку и настройку для 
небольшого проекта.
5) Запустите миграции: `php bin/console doctrine:migrations:migrate`
6) Запустите локальный сервер: `php -S localhost:8000 -t public`

## Описание методов проекта
### 1) Создание пользователя:
#### Метод POST
#### URL: `http://localhost:8000/users`
#### Пример запроса для Postman:
В `body` нужно выбрать тип `form-data` и указать следующие поля:
- `name` — имя пользователя,
- `email` — email пользователя (должен быть уникальным),
- `password` — пароль пользователя (будет зашифрован перед сохранением).

#### Описание логики
`Email` проверяется на уникальность. Если в базе уже существует пользователь 
с указанным `email`, возвращается ошибка: `"Пользователь с таким email уже существует!"`
Пароль перед сохранением хешируется для безопасности, так что в базе хранится его 
зашифрованная версия.

При успешном сохранении пользователя появится статус: `"Пользователь успешно создан!"`

Метод предназначен для создания пользователей с основными данными. При необходимости 
можно дополнить его другими полями, а также добавить дополнительные уровни валидации 
для обеспечения безопасности данных.

### 2) Обновление данных пользователя:
#### Метод PUT
#### URL: `http://localhost:8000/users/{id}`
#### Пример запроса для Postman:
В `body` нужно выбрать тип `x-www-form-urlencoded` и указать одно или несколько полей:
- `name` — имя пользователя,
- `email` — новый email пользователя (должен быть уникальным),
- `password` — новый пароль пользователя.

#### Описание логики
- Метод проверяет, что хотя бы одно из полей для обновления передано в запросе. 
Если все поля отсутствуют, возвращается ошибка: `"Не указаны данные для обновления."`.
- Поле `name` проверяется на пустоту. Если оно пустое, обновление не будет выполнено, 
и возвращается ошибка: `"Имя не может быть пустым."`.
- Поле `email` проверяется на корректность формата и уникальность. Если `email` уже занят 
другим пользователем, возвращается сообщение: `"Пользователь с таким email уже существует!"`.
- Пароль `password` перед обновлением хешируется для безопасности.

При успешном обновлении данных пользователя вернется статус: 
`"Данные пользователя успешно обновлены."`.

### 3) Удаление пользователя:
#### Метод DELETE
#### URL: `http://localhost:8000/users/{id}`
#### Пример запроса для Postman:
Нужно указать `id` пользователя, которого нужно удалить в URL: `http://localhost:8000/users/{id}`

#### Описание логики
- В данном методе происходит удаление пользователя по его `ID`.
- Если пользователь с таким `ID` не найден, возвращается сообщение `"Пользователь не найден!"`.
- Если пользователь существует, он удаляется, и возвращается статус `"Пользователь успешно удален!"`.

### 4) Авторизация пользователя:
#### Метод POST
#### URL: `http://localhost:8000/users/auth`
#### Пример запроса для Postman:  
В `body` в формате `form-data` необходимо передать `email` и `password`.

#### Описание логики
- Метод проверяет наличие обоих полей `email` и `password`. Если одно из них отсутствует, 
возвращается ошибка `"Не заполнены обязательные поля."`.
- Если пользователь с таким `email` не найден или пароль не совпадает, возвращается сообщение 
`"Неверные учетные данные."`.
- При успешной авторизации возвращается информация о пользователе: `id`, `name` и `email`.

### 5) Поиск пользователя:
#### Метод GET
#### URL: `http://localhost:8000/users/search`
#### Пример запроса для Postman: 
Передайте один из параметров `id`, `name` или `email` в строке запроса:
`http://localhost:8000/users/search?id=1`
`http://localhost:8000/users/search?name=Тест`
`http://localhost:8000/users/search?email=test@test.ru`

#### Описание логики
- Поиск может производиться по одному из указанных параметров.  Если параметр не передан, 
возвращается ошибка: `"Необходимо указать id, name или email."`.
- Если пользователь с указанными данными не найден, возвращается соответствующее сообщение:
`"Пользователь с таким id не найден!"`.
- При успешном поиске возвращается информация о пользователе: `id`, `name` и `email`.

### Заключение
Данный проект обеспечивает полный функционал управления пользователями: создание, обновление, 
удаление, авторизация и поиск. Запросы могут быть легко протестированы через Postman.